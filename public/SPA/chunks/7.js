(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{GXJN:function(t,e,a){"use strict";var i={name:"direct-debits-dialog",template:"direct-debits-dialog",mixins:[a("HXgr").a],props:{display_dialog:{required:!0},init_query:{required:!0}},data:function(){return{columns:[{text:"Created",value:"created_at"},{text:"Site ID",value:"site_id"},{text:"Site Name",value:"affinitySite.site_name"},{text:"Brand",value:"affinitySite.brand"},{text:"Account Name",value:"account_holder_name"},{text:"Bank Name",value:"bank_name"},{text:"Bank Address 1",value:"bank_address_1"},{text:"Bank Address 2",value:"bank_address_2"},{text:"Bank Town",value:"bank_town"},{text:"Bank Postcode",value:"bank_postcode"},{text:"Payment Day",value:"payment_day"},{text:"User",value:"user.name"}],default_query:{endpoint:"residential_direct_debits",fields:["created_at","account_holder_name","bank_name","bank_address_1","bank_address_2","bank_town","bank_postcode","payment_day","site_id"],relations:{user:{fields:["name"]},affinitySite:{fields:["site_id","site_name","brand"]}},order_by:[{field:"CREATED_AT",order:"DESC"}],params:{}},download_setup:{filename:"Direct Debits",columns:null}}}},n=a("KHd+"),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.display_dialog,callback:function(e){t.display_dialog=e},expression:"display_dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Direct Debits")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-toolbar-items",[a("v-btn",{attrs:{fab:"",loading:t.downloading},on:{click:t.download}},[a("v-icon",[t._v("cloud_download")])],1),t._v(" "),a("v-btn",{attrs:{fab:""},on:{click:function(e){return t.$emit("closeDirectDebitsDrilldown")}}},[a("v-icon",[t._v("close")])],1)],1)],1),t._v(" "),a("v-card-text",{staticClass:"mt-4"},[a("v-row",[a("v-col",[a("v-data-table",{attrs:{headers:t.displayColumns,items:t.rows,options:t.options,"server-items-length":t.server_total_rows,loading:t.loading,"footer-props":{"items-per-page-options":[25,50,100,250]}},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"top",fn:function(t){var e=t.pagination,i=t.options,n=t.updateOptions;return[a("v-data-footer",{attrs:{pagination:e,options:i,"items-per-page-options":[25,50,100,250],"items-per-page-text":"$vuetify.dataTable.itemsPerPageText"},on:{"update:options":n}})]}},{key:"item.affinitySite.brand",fn:function(e){var i=e.item;return[i.affinitySite?a("brand-chip",{attrs:{brand_prefix:i.affinitySite.brand}}):a("span",[t._v("-")])]}},{key:"item.site_id",fn:function(t){var e=t.item;return[a("affinity-site-chip",{attrs:{site_id:e.site_id}})]}}])})],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.a=s.exports},H5WY:function(t,e,a){"use strict";var i={name:"affinity-notes-by-day-chart",template:"affinity-notes-by-day-chart",mixins:[a("DAy3").a],props:{connection_type:{default:null},affinity_team_id:{default:null},user_id:{default:null}},data:function(){return{ready:!1,loading:!1,statistics:[]}},methods:{getStatistics:function(){var t=this;this.loading=!0;var e={endpoint:"stats_affinity_notes_by_day_chart",fields:["stats"],params:{date_entered_between:this.$store.getters["date_range/date_range"],connection_type:this.connection_type,affinity_team_id:this.affinity_team_id,user_id:this.user_id}};this.$graph.getEndPointQuery(e).then((function(e){console.log("CDR affinity notes by day",e),t.statistics=_.toArray(e.stats)})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1,t.ready=!0}))}},computed:{displayTitle:function(){return this.affinity_team_id?"Affinity Notes for Team: "+affinity_manager.teams_manager().getTeamByID(this.affinity_team_id).team_name:this.user_id?"Affinity Notes per Day for User ID: "+this.user_id:"Affinity Notes per Day"},computedSeries:function(){return[{name:"Site Notes",data:this.statistics.map((function(t){return parseInt(t.affinity_notes_site_count)}))},{name:"Ticket Notes",data:this.statistics.map((function(t){return parseInt(t.affinity_notes_ticket_count)}))},{name:"Task Notes",data:this.statistics.map((function(t){return parseInt(t.affinity_notes_task_count)}))}]},computedChartOptions:function(){return{colors:[COLOR_BLUE,COLOR_GREEN,COLOR_RED],chart:{type:"bar",stacked:!0},plotOptions:{bar:{horizontal:!1}},dataLabels:{enabled:!1},legend:{position:"top"},tooltip:{enabled:!0,theme:"dark"},xaxis:{categories:this.statistics.map((function(t){return t.date})),labels:{show:!0,rotate:0}}}}},created:function(){this.getStatistics()}},n=a("KHd+"),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("stat-panel",{attrs:{loading:t.loading}},[a("v-card-title",{staticClass:"pa-0"},[t._v(t._s(t.displayTitle))]),t._v(" "),t.ready?a("apexchart",{attrs:{type:"bar",height:"300",options:t.computedChartOptions,series:t.computedSeries}}):t._e()],1)}),[],!1,null,null,null);e.a=s.exports},Hqik:function(t,e,a){"use strict";var i={name:"affinity-notes-by-hour-chart",template:"affinity-notes-by-hour-chart",mixins:[a("DAy3").a],props:{connection_type:{default:null},affinity_team_id:{default:null},user_id:{default:null}},data:function(){return{ready:!1,loading:!1,statistics:[]}},methods:{getStatistics:function(){var t=this;this.loading=!0;var e={endpoint:"stats_affinity_notes_by_hour_chart",fields:["stats"],params:{date_entered_between:this.$store.getters["date_range/date_range"],connection_type:this.connection_type,affinity_team_id:this.affinity_team_id,user_id:this.user_id}};this.$graph.getEndPointQuery(e).then((function(e){console.log("CDR affinity notes by hour",e),t.statistics=_.toArray(e.stats)})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1,t.ready=!0}))}},computed:{displayTitle:function(){return this.affinity_team_id?"Affinity Notes for Team: "+affinity_manager.teams_manager().getTeamByID(this.affinity_team_id).team_name:this.user_id?"Affinity Notes per Hour for User ID: "+this.user_id:"Affinity Notes per Hour"},computedSeries:function(){return[{name:"Site Notes",data:this.statistics.map((function(t){return parseInt(t.affinity_notes_site_count)}))},{name:"Ticket Notes",data:this.statistics.map((function(t){return parseInt(t.affinity_notes_ticket_count)}))},{name:"Task Notes",data:this.statistics.map((function(t){return parseInt(t.affinity_notes_task_count)}))}]},computedChartOptions:function(){return{colors:[COLOR_BLUE,COLOR_GREEN,COLOR_RED],chart:{type:"bar",stacked:!0},plotOptions:{bar:{horizontal:!1}},dataLabels:{enabled:!1},legend:{position:"top"},tooltip:{enabled:!0,theme:"dark"},xaxis:{categories:this.statistics.map((function(t){return t.hour})),labels:{show:!0,rotate:0}}}}},created:function(){this.getStatistics()}},n=a("KHd+"),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("stat-panel",{attrs:{loading:t.loading}},[a("v-card-title",{staticClass:"pa-0"},[t._v(t._s(t.displayTitle))]),t._v(" "),t.ready?a("apexchart",{attrs:{type:"bar",height:"300",options:t.computedChartOptions,series:t.computedSeries}}):t._e()],1)}),[],!1,null,null,null);e.a=s.exports},TS5m:function(t,e,a){"use strict";var i={name:"affinity-notes-dialog",template:"affinity-notes-dialog",mixins:[a("HXgr").a],props:{display_dialog:{required:!0},init_query:{required:!0}},data:function(){return{columns:[{text:"Note ID",value:"note_id"},{text:"Date Entered",value:"date_entered"},{text:"Summary",value:"summary"},{text:"Category",value:"category"},{text:"Sub Category",value:"sub_category"},{text:"Connection Type",value:"connection_type"},{text:"User",value:"user.name"}],default_query:{endpoint:"affinity_notes",fields:["note_id","category","sub_category","note","summary","enter_by","date_entered","connection_type"],relations:{user:{fields:["id","name"]}},order_by:[{field:"DATE_ENTERED",order:"DESC"}],params:{}},download_setup:{filename:"Affinity Notes",columns:null}}}},n=a("KHd+"),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.display_dialog,callback:function(e){t.display_dialog=e},expression:"display_dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Affinity Notes")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-toolbar-items",[a("v-btn",{attrs:{fab:"",loading:t.downloading},on:{click:t.download}},[a("v-icon",[t._v("cloud_download")])],1),t._v(" "),a("v-btn",{attrs:{fab:""},on:{click:function(e){return t.$emit("closeAffinityNotesDrilldown")}}},[a("v-icon",[t._v("close")])],1)],1)],1),t._v(" "),a("v-card-text",{staticClass:"mt-4"},[a("v-row",[a("v-col",[a("v-data-table",{attrs:{headers:t.displayColumns,items:t.rows,options:t.options,"server-items-length":t.server_total_rows,loading:t.loading,"footer-props":{"items-per-page-options":[25,50,100,250]}},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"top",fn:function(t){var e=t.pagination,i=t.options,n=t.updateOptions;return[a("v-data-footer",{attrs:{pagination:e,options:i,"items-per-page-options":[25,50,100,250],"items-per-page-text":"$vuetify.dataTable.itemsPerPageText"},on:{"update:options":n}})]}},{key:"item.user.name",fn:function(e){var i=e.item;return[i.user?a("user-chip",{attrs:{user_name:i.user.name,user_id:i.user.id}}):a("span",[t._v("-")])]}}])})],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.a=s.exports},qVQa:function(t,e,a){"use strict";a.r(e);var i=a("Jv73"),n=a("s5ow"),s=a("H5WY"),o=a("Hqik"),r=a("w7Dg"),l=a("3vT2"),d=a("xrjI"),c={components:{ContractsTotalByType:a("sNCG").a,OrdersTotal:d.a,CustomersCreatedTotal:l.a,ProspectsCreatedTotal:r.a,AffinityNotesByHourChart:o.a,AffinityNotesByDayChart:s.a,AffinityNotesTotal:n.a},mixins:[i.a],data:function(){return{}},methods:{}},u=a("KHd+"),_=Object(u.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-row",[e("v-col",[e("stat-toolbar",{attrs:{title:"Playground"}}),this._v(" "),e("v-row",[e("v-col",{attrs:{cols:"6",sm:"3",md:"2"}},[e("contracts-total-by-type",{attrs:{contract_type:"broadband_monthly",actioned_contracts:""}})],1)],1)],1)],1)}),[],!1,null,null,null);e.default=_.exports},s5ow:function(t,e,a){"use strict";var i=a("DAy3"),n=a("GXJN"),s={name:"affinity-notes-total",template:"affinity-notes-total",components:{AffinityNotesDialog:a("TS5m").a,DirectDebitsDialog:n.a},mixins:[i.a],props:{connection_type:{default:null},user_id:{default:null},affinity_team_id:{default:null}},data:function(){return{dialog:!1,loading:!1,statistics:{total:0},query:{params:{}}}},methods:{requestDrilldown:function(){this.query.params.date_entered_between=this.$store.getters["date_range/date_range"],this.query.params.connection_type=this.connection_type?this.connection_type:null,this.query.params.user_id=this.user_id?this.user_id:null,this.query.params.affinity_team_id=this.affinity_team_id?this.affinity_team_id:null,this.dialog=!0},getStatistics:function(){var t=this;this.loading=!0;var e={endpoint:"stats_affinity_notes_total",fields:["stats"],params:{date_entered_between:this.$store.getters["date_range/date_range"],connection_type:this.connection_type,user_id:this.user_id,affinity_team_id:this.affinity_team_id}};this.$graph.getEndPointQuery(e).then((function(e){console.log("Stats Affinity Notes",e),t.statistics=e.stats})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1}))}},computed:{displayTitle:function(){return this.connection_type?_.capitalize(this.connection_type)+" Notes":"All Affinity Notes"},displaySubTitle:function(){return this.connection_type?"Note Type: "+_.capitalize(this.connection_type):"All Note Types"}},created:function(){this.getStatistics()}},o=a("KHd+"),r=Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("stat-panel",{attrs:{loading:t.loading}},[a("affinity-notes-dialog",{attrs:{display_dialog:t.dialog,init_query:t.query},on:{closeAffinityNotesDrilldown:function(e){t.dialog=!1}}}),t._v(" "),a("v-card-title",{staticClass:"pa-0"},[t._v(t._s(t.displayTitle))]),t._v(" "),a("v-tooltip",{scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;e.attrs;return[a("v-card-subtitle",t._g({staticClass:"pa-0"},i),[t._v(t._s(t.displaySubTitle))])]}}])}),t._v(" "),t.statistics?a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("span",{on:{click:function(e){return t.requestDrilldown()}}},[a("stat-number",{attrs:{number:t.statistics.total.toLocaleString()}})],1)])],1):t._e()],1)}),[],!1,null,null,null);e.a=r.exports}}]);